<div class="container-fluid">

    <ng-template #copyWorkoutModal let-modal>
        <div class="modal-header">
            <h4 class="modal-title" id="modal-basic-title">Copy Workout Plan To My Workout Plans</h4>
            <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        <div class="modal-body">
            <form #createWorkoutForm="ngForm">
                <h5 class="text-center">{{workoutPlan.name}}</h5>
                <table class="table table-striped table-hover mb-4 mx-auto"
                       *ngFor="let workout of workoutPlan.workouts">
                    <thead>
                    <tr>
                        <th colspan="5" class="py-auto"><h5>{{workout.orderIndex}}. {{workout.workout.name}}</h5></th>
                    </tr>
                    <tr *ngIf="workout.workout.exercises && !workout.workout.exercises.length">
                        <td colspan="5" class="py-auto"><h5>No added exercises in this workout.</h5></td>
                    </tr>
                    <tr *ngIf="workout.workout.exercises && workout.workout.exercises.length">
                        <th scope="col" style="width: 10%">Order</th>
                        <th scope="col" style="width: 30%">Exercise name</th>
                        <th scope="col" style="width: 20%">Reps</th>
                        <th scope="col" style="width: 20%">Sets</th>
                    </tr>
                    </thead>
                    <tbody>

                    <tr *ngFor="let exercise of workout.workout.exercises">
                        <td class="align-middle">{{exercise.orderIndex}}</td>
                        <td class="align-middle">{{exercise.exercise.name}}</td>
                        <td class="align-middle">{{exercise.reps}}</td>
                        <td class="align-middle">{{exercise.sets}}</td>
                    </tr>
                    </tbody>
                </table>
            </form>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-outline-dark" (click)="modal.close()">Copy to My Workout Plans</button>
        </div>
    </ng-template>


    <div class="jumbotron">
        <img src="assets/static/images/logo.png" height="300px" class="d-inline-block align-center" alt="">
        <h1 class="display-4">Workout Details</h1>
        <hr class="my-2"/>
        <div class="container pt-4">
            <div class="row">
                <div class="workout-plan-container col-lg-9 mx-auto">
                    <div class="exercise-intro mt-4">
                        <h2 class="display-4 d-block mx-auto font-weight-bolder">{{workoutPlan.name}}</h2>
                    </div>

                    <hr class="my-4"/>

                    <h3 class="font-weight-light pb-3">Creator: <a class="card-link"
                                                                   routerLink="/profile/{{workoutPlan.creator.username}}">{{workoutPlan.creator.username}}</a>
                    </h3>

                    <table class="table table-striped table-hover mb-4"
                           *ngFor="let workout of workoutPlan.workouts">
                        <h4 class="order-index-workout font-weight-bold font-italic">{{workout.orderIndex}}</h4>
                        <thead>
                        <tr>
                            <th colspan="5" class="py-auto"><h5><a
                                    routerLink="/workouts/details/{{workout.workout.id}}">{{workout.workout.name}}</a>
                            </h5></th>
                        </tr>
                        <tr *ngIf="workout.workout.exercises && !workout.workout.exercises.length">
                            <td colspan="5" class="py-auto"><h5>No added exercises in this workout.</h5></td>
                        </tr>
                        <tr *ngIf="workout.workout.exercises && workout.workout.exercises.length">
                            <th scope="col" style="width: 10%">Order</th>
                            <th scope="col" style="width: 30%">Exercise name</th>
                            <th scope="col" style="width: 20%">Reps</th>
                            <th scope="col" style="width: 20%">Sets</th>
                            <th scope="col" style="width: 20%;"></th>
                        </tr>
                        </thead>
                        <tbody *ngIf="workout.workout.exercises && workout.workout.exercises.length">

                        <tr *ngFor="let exercise of workout.workout.exercises">
                            <td class="align-middle">{{exercise.orderIndex}}</td>
                            <td class="align-middle">{{exercise.exercise.name}}</td>
                            <td class="align-middle">{{exercise.reps}}</td>
                            <td class="align-middle">{{exercise.sets}}</td>
                            <td>
                                <button type="button" routerLink="/exercises/details/{{exercise.exercise.id}}"
                                        class="btn btn-primary mr-2"><i class="far fa-eye"></i></button>
                            </td>
                        </tr>
                        </tbody>
                    </table>

                    <h3 class="mx-auto font-weight-light">Sets per Muscle Group</h3>

                    <div class="chart-container row align-middle my-4">
                        <ngx-charts-bar-horizontal
                                [view]="[800, exercisesSets.length < 8 ? 250 : 500]"
                                [animations]="true"
                                [xAxis]="true"
                                [yAxis]="true"
                                [results]="exercisesSets"
                                legendTitle="Muscle Groups"
                                [legend]="true"
                                [showDataLabel]="false"
                                [showXAxisLabel]="false"
                                [showGridLines]="true"
                                [showYAxisLabel]="false"
                                [gradient]="true"
                                [noBarWhenZero]="true"
                                [roundDomains]="true"
                                [roundEdges]="true"
                                [tooltipDisabled]="false"
                                [trimYAxisTicks]="false"
                                [customColors]="customColors"
                        >

                        </ngx-charts-bar-horizontal>
                    </div>

                    <div class="buttons col-12 mx-auto p-3">
                        <button type="button" class="btn btn-sm btn-success" (click)="open(copyWorkoutModal)">
                            Copy to My Workout Plans
                        </button>
                    </div>

                </div>


            </div>


        </div>

    </div>

</div>

